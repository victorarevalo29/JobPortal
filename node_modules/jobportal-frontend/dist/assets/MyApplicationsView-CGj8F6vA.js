import{_ as x,p as D,c as d,x as z,o as M,a as l,b as t,d as p,t as i,w as e,l as k,B as v,f as y,F as T,e as E,u as I,g as n,h as r,m as b}from"./index-Cw7ty9o7.js";import{B as g}from"./BaseCard-B_bAREMe.js";import{u as J}from"./jobsStore-MtEZzHB6.js";const L={class:"applications"},U={class:"applications__hero"},$={class:"applications__hero-actions"},F={class:"applications__summary"},R={class:"applications__list"},q={key:2,class:"applications__grid"},X={class:"applications__company"},G={class:"applications__row"},H=["data-status"],K={class:"applications__date"},O={key:0,class:"applications__message"},P={key:1,class:"applications__cv"},Q=["onClick"],W={class:"applications__actions"},Y={__name:"MyApplicationsView",setup(Z){const f=I(),c=J(),h=D(),u=d(()=>c.applications),_=d(()=>{var a,s;return((a=h.user)==null?void 0:a._id)||((s=h.user)==null?void 0:s.id)}),C=d(()=>u.value.length),w=d(()=>u.value.filter(a=>["in-review","interview"].includes(a.status)).length),m=async()=>{_.value&&await c.fetchApplications({candidate:_.value})},A=()=>{m()},B=()=>f.push("/jobs"),S=a=>f.push(`/jobs/${a}`),N=a=>{a&&window.open(a,"_blank","noopener")},V=a=>{if(!a)return"recién";const s=new Date(a);return Number.isNaN(s.getTime())?"recién":s.toLocaleDateString("es-MX",{day:"numeric",month:"short"})};return z(_,(a,s)=>{a&&a!==s&&m()}),M(()=>{m()}),(a,s)=>(n(),l("section",L,[t("header",U,[s[3]||(s[3]=t("div",null,[t("p",{class:"section-kicker"},"Seguimiento en tiempo real"),t("h2",null,"Mis postulaciones"),t("p",null,"Revisa los roles donde ya aplicaste y monitorea cada actualización de estado.")],-1)),t("div",$,[t("div",F,[t("div",null,[s[0]||(s[0]=t("small",null,"Total",-1)),t("strong",null,i(C.value),1)]),t("div",null,[s[1]||(s[1]=t("small",null,"En revisión",-1)),t("strong",null,i(w.value),1)])]),p(v,{variant:"ghost",size:"sm","is-loading":k(c).loading,onClick:A},{default:e(()=>[...s[2]||(s[2]=[r(" Actualizar ",-1)])]),_:1},8,["is-loading"])])]),t("section",R,[k(c).loading?(n(),y(g,{key:0,class:"applications__card applications__card--loading"},{default:e(()=>[...s[4]||(s[4]=[t("p",null,"Cargando tus postulaciones…",-1)])]),_:1})):u.value.length?(n(),l("ul",q,[(n(!0),l(T,null,E(u.value,o=>(n(),l("li",{key:o.id},[p(g,{class:"applications__card"},{title:e(()=>[r(i(o.role),1)]),default:e(()=>[t("p",X,i(o.jobCompany),1),t("div",G,[t("span",{class:"status-chip","data-status":o.status},i(o.statusLabel),9,H),t("span",K,"Enviada "+i(V(o.submittedAt)),1)]),o.message?(n(),l("p",O,"“"+i(o.message)+"”",1)):b("",!0),o.cvUrl?(n(),l("p",P,[t("button",{class:"applications__cv-link",type:"button",onClick:j=>N(o.cvUrl)}," Descargar CV adjunto ",8,Q)])):b("",!0),t("div",W,[p(v,{variant:"ghost",size:"sm",onClick:j=>S(o.jobId)},{default:e(()=>[...s[8]||(s[8]=[r("Ver vacante",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]))),128))])):(n(),y(g,{key:1,class:"applications__card applications__card--empty"},{title:e(()=>[...s[5]||(s[5]=[r("Sin postulaciones activas",-1)])]),default:e(()=>[s[7]||(s[7]=t("p",null,"Aún no aplicas a ningún rol. Descubre oportunidades y regresa aquí para monitorear tu progreso.",-1)),p(v,{size:"sm",onClick:B},{default:e(()=>[...s[6]||(s[6]=[r("Buscar vacantes",-1)])]),_:1})]),_:1}))])]))}},os=x(Y,[["__scopeId","data-v-343860a9"]]);export{os as default};
