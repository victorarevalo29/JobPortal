import{_ as q,c as v,o as W,a as c,b as e,d as _,w as p,m as B,F as w,e as $,t,B as N,l as F,u as H,h as y,g as i,p as Y,R as j,s as te,f as G,A as K,C as se,n as oe}from"./index-Cw7ty9o7.js";import{B as I}from"./BaseCard-B_bAREMe.js";import{u as Z}from"./jobsStore-MtEZzHB6.js";import{u as le}from"./resourcesStore-Y4QDwQAZ.js";import{u as ne}from"./forumStore-B1Zqy042.js";import re from"./ManageJobs-DQLUs6Gl.js";import ie from"./Applicants-FllERHAh.js";import"./BaseInput-DF9V6cTV.js";import"./companiesStore-MJg2-nhw.js";const ce={class:"talent-dashboard"},ue={class:"talent-dashboard__grid"},de={class:"matches-table"},pe=["onClick"],me={key:0},ve={class:"match-card__footer"},be={class:"talent-dashboard__stack"},_e={class:"list"},ye={class:"pill"},fe={key:0,class:"empty"},he={class:"list"},ge={key:0,class:"empty"},ke={class:"actions"},Ce={__name:"TalentDashboard",setup(U){const h=Z(),b=le(),m=ne(),z=H(),x=v(()=>h.jobs.slice(0,5)),T=v(()=>b.resources.slice(0,3)),V=v(()=>m.threads.slice(0,3)),A=k=>{k&&z.push({name:"job-detail",params:{id:k}})},P=()=>z.push("/resources"),g=()=>z.push("/forum"),E=k=>window.open(k,"_blank");return W(()=>{h.jobs.length||h.fetchJobs(),b.resources.length||b.fetchResources(),m.threads.length||m.fetchThreads()}),(k,n)=>(i(),c("section",ce,[e("div",ue,[_(I,{class:"match-card"},{title:p(()=>[...n[3]||(n[3]=[y("Vacantes recomendadas",-1)])]),footer:p(()=>[e("div",ve,[n[7]||(n[7]=e("p",null,"Sugerimos roles compatibles con tu portafolio y cohort actual.",-1)),_(N,{size:"sm",onClick:n[0]||(n[0]=u=>F(z).push("/jobs"))},{default:p(()=>[...n[6]||(n[6]=[y("Ir al buscador",-1)])]),_:1})])]),default:p(()=>[n[8]||(n[8]=e("p",{class:"muted"},"Basado en tus skills y búsquedas recientes.",-1)),e("table",de,[n[5]||(n[5]=e("thead",null,[e("tr",null,[e("th",null,"Rol"),e("th",null,"Compañía"),e("th",null,"Modalidad"),e("th",null,"Compensación")])],-1)),e("tbody",null,[(i(!0),c(w,null,$(x.value,u=>(i(),c("tr",{key:u.id,onClick:L=>A(u.id)},[e("td",null,t(u.title),1),e("td",null,t(u.company),1),e("td",null,t(u.modality||"Flexible"),1),e("td",null,t(u.salaryRange||u.salary||"A convenir"),1)],8,pe))),128)),x.value.length?B("",!0):(i(),c("tr",me,[...n[4]||(n[4]=[e("td",{colspan:"4",class:"empty"},"Aún no hay coincidencias. Explora nuevas áreas para desbloquear recomendaciones.",-1)])]))])])]),_:1}),e("div",be,[_(I,{class:"resource-card"},{title:p(()=>[...n[9]||(n[9]=[y("Recursos activos",-1)])]),default:p(()=>[e("ul",_e,[(i(!0),c(w,null,$(T.value,u=>(i(),c("li",{key:u.id||u.title},[e("div",null,[e("span",ye,t(u.format),1),e("strong",null,t(u.title),1),e("p",null,t(u.description),1)]),e("button",{type:"button",class:"link-button",onClick:P},"Abrir")]))),128)),T.value.length?B("",!0):(i(),c("li",fe,"Publicaremos nuevos recursos muy pronto."))])]),_:1}),_(I,{class:"community-card"},{title:p(()=>[...n[10]||(n[10]=[y("Comunidad y foros",-1)])]),default:p(()=>[e("ul",he,[(i(!0),c(w,null,$(V.value,u=>(i(),c("li",{key:u.id||u.title},[e("div",null,[e("strong",null,t(u.title),1),e("p",null,t(u.preview),1)]),e("button",{type:"button",class:"pill-button",onClick:g},t(u.category),1)]))),128)),V.value.length?B("",!0):(i(),c("li",ge,"Aún no hay conversaciones activas."))])]),_:1})])]),_(I,{class:"talent-dashboard__support",variant:"glass"},{title:p(()=>[...n[11]||(n[11]=[y("¿Necesitas ayuda?",-1)])]),default:p(()=>[n[13]||(n[13]=e("p",null,"Escríbenos para ajustar tu perfil o solicitar mentoría personalizada.",-1)),e("div",ke,[_(N,{variant:"ghost",size:"sm",onClick:n[1]||(n[1]=u=>E("mailto:soporte@jobportal.dev"))},{default:p(()=>[...n[12]||(n[12]=[y("Enviar correo",-1)])]),_:1}),e("button",{type:"button",class:"link-button",onClick:n[2]||(n[2]=u=>E("https://cal.com/jobportal/support"))},"Agenda una llamada →")])]),_:1})]))}},we=q(Ce,[["__scopeId","data-v-0cd1ddbf"]]),$e={class:"employer-dashboard"},Ae={class:"employer-dashboard__hero"},Se={class:"employer-dashboard__actions"},Ne={class:"employer-dashboard__stats"},ze={class:"stat-card__label"},xe={class:"stat-card__value"},Pe={class:"stat-card__sub"},Te={class:"employer-dashboard__grid"},Ve={class:"vacancy-cards"},Ee={class:"vacancy-card__head"},Me={class:"pill"},Re={class:"vacancy-card__date"},De={class:"vacancy-card__location"},Fe={class:"vacancy-card__contract"},Ie={class:"vacancy-card__summary"},Be={class:"vacancy-card__footer"},Le={class:"vacancy-card__actions"},Je={key:0,class:"vacancy-card__empty"},je={class:"applicant-list"},qe={key:0,class:"applicant-list__empty"},He={__name:"Dashboard",setup(U){const h=H(),b=Z(),m=Y(),z={rafaga:"Ráfaga Mobility Lab",selva:"Selva Cloud Cartography",matiz:"Matiz Learning Lab",pulsar:"Pulsar Analytics Coop",nebula:"Nebula Labs",indiehr:"IndieHR",costadev:"Costa Dev Commons",bruma:"Bruma XR Forge",faro:"Faro Civic Systems"},x=v(()=>{var s,l,C,f,M,R;if((l=(s=m.user)==null?void 0:s.company)!=null&&l.name)return m.user.company.name;if((C=m.user)!=null&&C.companyName)return m.user.companyName;const d=(R=(M=(f=m.user)==null?void 0:f.email)==null?void 0:M.split("@")[1])==null?void 0:R.split(".")[0];return d&&z[d]||""}),T=(d="")=>d.toString().toLowerCase(),V=d=>{const s=d.createdAt||d.updatedAt||d.publishedAt,l=s?Date.parse(s):NaN;if(!Number.isNaN(l))return l;const C=typeof s=="string"?s.match(/(\d+)/):null;if(C){const f=Number(C[1]);if(Number.isFinite(f))return Date.now()-f*24*60*60*1e3}return 0},A=v(()=>{const d=b.jobs||[];if(!d.length)return[];const s=T(x.value),l=s?d.filter(f=>{var R;return T(((R=f.company)==null?void 0:R.name)||f.company).includes(s)}):d;return[...l.length?l:d].sort((f,M)=>V(M)-V(f))}),P=v(()=>(b.applications||[]).reduce((d,s)=>{const l=s.jobId;return l&&(d[l]=(d[l]||0)+1),d},{})),g=v(()=>A.value.reduce((d,s)=>d+(P.value[s.id]||0),0)),E=v(()=>[{label:"Vacantes activas",value:A.value.length.toString().padStart(2,"0"),subtext:x.value?`Para ${x.value}`:"Con filtros personalizados"},{label:"Postulaciones recibidas",value:g.value.toString().padStart(2,"0"),subtext:"Sumatoria de tus vacantes"},{label:"Tiempo a contratar",value:"18 días",subtext:"Promedio JobPortal"}]),k=v(()=>{const d=new Set(A.value.map(s=>s.id));return(b.applications||[]).filter(s=>d.has(s.jobId)).slice(0,5)}),n=()=>{h.push("/employer/jobs")},u=d=>{h.push({name:"employer-applicants",query:{job:d}})},L=d=>{const s=d.publishedAt||d.postedAgo,l=s?Date.parse(s):NaN;return Number.isNaN(l)?s||"Recién publicado":new Intl.DateTimeFormat("es-MX",{day:"numeric",month:"short"}).format(l)};return W(async()=>{b.jobs.length||await b.fetchJobs(),b.applications.length||await b.fetchApplications()}),(d,s)=>(i(),c("section",$e,[e("header",Ae,[s[2]||(s[2]=e("div",null,[e("p",{class:"section-kicker"},"Panel empresarial"),e("h1",null,"Diseña cohorts, publica roles y monitorea talento."),e("p",null,"Un solo panel para medir vacantes, postulaciones y la calidad de los perfiles recibidos.")],-1)),e("div",Se,[_(N,{size:"sm",onClick:n},{default:p(()=>[...s[0]||(s[0]=[y("Publicar empleo",-1)])]),_:1}),_(F(j),{class:"ghost-link",to:"/employer/applicants"},{default:p(()=>[...s[1]||(s[1]=[y("Ver postulaciones",-1)])]),_:1})])]),e("section",Ne,[(i(!0),c(w,null,$(E.value,l=>(i(),c("article",{class:"stat-card",key:l.label},[e("p",ze,t(l.label),1),e("p",xe,t(l.value),1),e("p",Pe,t(l.subtext),1)]))),128))]),e("section",Te,[_(I,{class:"employer-dashboard__jobs-card"},{title:p(()=>[...s[3]||(s[3]=[y("Vacantes activas",-1)])]),default:p(()=>[s[6]||(s[6]=e("p",{class:"muted"},"Filtramos automáticamente por la organización logueada.",-1)),e("div",Ve,[(i(!0),c(w,null,$(A.value,l=>(i(),c("article",{key:l.id,class:"vacancy-card"},[e("div",Ee,[e("span",Me,t(l.modality||"Flexible"),1),e("span",Re,t(L(l)),1)]),e("h3",null,t(l.title),1),e("p",De,t(l.location||"Ubicación por definir"),1),e("p",Fe,t(l.contractType||l.category||"Contrato abierto"),1),e("p",Ie,t(l.description||"Comparte contexto de la vacante para recibir mejores matches."),1),e("div",Be,[e("div",null,[s[4]||(s[4]=e("p",{class:"eyebrow"},"Postulaciones",-1)),e("strong",null,t(P.value[l.id]||0),1)]),e("div",Le,[_(N,{size:"sm",variant:"ghost",onClick:C=>u(l.id)},{default:p(()=>[...s[5]||(s[5]=[y("Ver postulantes",-1)])]),_:1},8,["onClick"]),e("button",{class:"link-button",type:"button",onClick:n},"Editar")])])]))),128)),A.value.length?B("",!0):(i(),c("p",Je," Aún no hay vacantes asociadas a tu empresa. Publica una nueva para comenzar a recibir perfiles. "))])]),_:1}),_(I,null,{title:p(()=>[...s[7]||(s[7]=[y("Postulaciones recientes",-1)])]),footer:p(()=>[_(F(j),{to:"/employer/applicants"},{default:p(()=>[...s[9]||(s[9]=[y("Abrir módulo de postulaciones →",-1)])]),_:1})]),default:p(()=>[e("ul",je,[(i(!0),c(w,null,$(k.value,l=>(i(),c("li",{key:l.id},[e("div",null,[e("strong",null,t(l.candidate),1),e("p",null,t(l.role),1)]),e("span",null,t(l.status),1)]))),128)),k.value.length?B("",!0):(i(),c("li",qe,[...s[8]||(s[8]=[e("p",null,"Sin postulaciones recientes para estas vacantes.",-1)])]))])]),_:1})])]))}},Q=q(He,[["__scopeId","data-v-60f43427"]]),Ue={key:0,class:"dashboard-view"},Xe={class:"dashboard-view__hero"},Oe={class:"dashboard-view__hero-content"},Ge={class:"eyebrow"},Ke={class:"dashboard-view__actions"},Qe={class:"dashboard-view__hero-cards"},We={class:"hero-card__label"},Ye={class:"hero-card__value"},Ze={key:0,class:"dashboard-view__stats"},ea={class:"stat-card__label"},aa={class:"stat-card__value"},ta={class:"dashboard-view__insights"},sa={class:"eyebrow"},oa=["onClick"],la={class:"dashboard-view__profile glass-surface"},na={class:"profile-card"},ra={class:"profile-chip"},ia={class:"profile-card__actions"},ca={key:1,class:"dashboard-view__widgets"},ua={class:"widget-card"},da={class:"widget-card__progress",role:"presentation"},pa={class:"widget-card widget-card--apps"},ma={class:"widget-card__stats"},va={key:2,class:"dashboard-view__body glass-surface"},ba={key:3,class:"dashboard-view__body glass-surface"},_a={class:"dashboard-tabs",role:"tablist"},ya=["onClick"],fa={__name:"DashboardView",setup(U){const h=H(),b=Y(),m=v(()=>{var a;const r=((a=b.user)==null?void 0:a.role)||"talent";return r==="user"?"talent":r}),z=v(()=>{var r,a,o;return((r=b.user)==null?void 0:r.name)||((o=(a=b.user)==null?void 0:a.email)==null?void 0:o.split("@")[0])||"Comunidad"}),x=v(()=>m.value==="employer"?"Administra tus vacantes y postulaciones":"Explora retos, recursos y comunidad"),T=v(()=>m.value==="employer"?"Centraliza vacantes, revisa postulaciones y comparte contexto con tu equipo.":"Organiza tu plan de aprendizaje, recibe recomendaciones y participa en la comunidad JobPortal."),V=v(()=>m.value==="employer"?"Mantén actualizado el perfil de tu organización":"Haz que tu perfil cuente tu historia profesional"),A=v(()=>m.value==="employer"?"Comparte bio, links y contexto para acelerar el match con talento.":"Refuerza tu bio, habilidades y enlaces clave antes de aplicar."),P=v(()=>{var r,a;return{name:((r=b.user)==null?void 0:r.name)||"Perfil sin nombre",email:((a=b.user)==null?void 0:a.email)||"Agrega un correo",roleLabel:m.value==="employer"?"Employer":"Talento"}}),g=r=>new Intl.NumberFormat("es-MX",{maximumFractionDigits:0}).format(Number.isFinite(r)?r:0),E=r=>{const a=Number((r==null?void 0:r.applicationsAccepted)??(r==null?void 0:r.acceptedApplications));if(Number.isFinite(a)&&a>=0)return a;const o=Number(r==null?void 0:r.applicationsSent);return Number.isFinite(o)&&o>0?Math.max(0,Math.round(o*.35)):0},k=v(()=>{var D;if(m.value==="employer")return[];const r=((D=b.user)==null?void 0:D.stats)||{},a=Number(r.applicationsSent)||0,o=E(r),S=Number(r.profileViews)||0;return[{label:"Aplicaciones enviadas",value:g(a),meta:"Últimos 30 días"},{label:"Aplicaciones aceptadas",value:g(Math.min(o,a)),meta:o?"Con entrevistas agendadas":"Aún sin confirmaciones"},{label:"Visitas al perfil",value:g(S),meta:"Semana actual"}]}),n=v(()=>{if(m.value==="employer")return 100;const r=["bio","resumeUrl","skills"],a=r.reduce((o,S)=>{var J;const D=(J=b.user)==null?void 0:J[S];return Array.isArray(D)?o+(D.length?1:0):o+(D?1:0)},0);return Math.round(a/r.length*100)||0}),u=v(()=>{var O;if(m.value==="employer")return{headline:"",copy:"",sent:0,accepted:0,reviewing:0};const r=((O=b.user)==null?void 0:O.stats)||{},a=Number(r.applicationsSent)||0,o=Math.min(E(r),a),S=Math.max(a-o,0);return{headline:S?`${S} aplicaciones en revisión`:"Sin revisiones pendientes",copy:a?"Seguimos notificando a las empresas. Puedes actualizar tu info cuando quieras.":"Envía tu primera aplicación para desbloquear seguimiento y recordatorios.",sent:g(a),accepted:g(o),reviewing:g(S)}}),L=v(()=>m.value==="employer"?[{label:"Vacantes activas",value:"08",meta:"En vivo esta semana"},{label:"Postulaciones",value:"42",meta:"Últimos 14 días"},{label:"Tiempo a contratar",value:"18 d",meta:"Promedio ciclo"}]:[{label:"Retos completados",value:"12",meta:"Historial JobPortal"},{label:"Match cultural",value:"92%",meta:"Promedio de tus cohorts"},{label:"Mentorías",value:"05",meta:"Semana actual"}]),d=v(()=>m.value==="employer"?[{badge:"Panel employer",title:"Refina tu storytelling de vacantes",copy:"Comparte contexto multimedia y asegura feedback de talento en menos de 48h.",accent:"rgba(59,130,246,0.25)",cta:{label:"Ir a vacantes",to:"/employer/jobs"}},{badge:"Pipeline",title:"Prioriza entrevistas clave",copy:"Clasifica postulaciones con etiquetas inteligentes y notas en tiempo real.",accent:"rgba(14,165,233,0.25)",cta:{label:"Ver postulaciones",to:"/employer/applicants"}}]:[{badge:"Plan de carrera",title:"Define tus próximos experimentos",copy:"Explora retos técnicos y recursos verificados para fortalecer tu portafolio.",accent:"rgba(59,130,246,0.25)",cta:{label:"Explorar recursos",to:"/resources"}},{badge:"Comunidad",title:"Comparte aprendizajes en foros",copy:"Suma tus hallazgos en debates activos y recibe retroalimentación curada.",accent:"rgba(124,58,237,0.25)",cta:{label:"Ir a foros",to:"/forum"}}]),s=v(()=>m.value==="employer"?"Publicar vacante":"Buscar vacantes"),l=v(()=>m.value==="employer"?"/employer/jobs":"/jobs"),C=[{id:"overview",label:"Resumen",component:Q},{id:"jobs",label:"Vacantes",component:re},{id:"applicants",label:"Postulaciones",component:ie}],f=te("overview"),M=v(()=>{var r;return((r=C.find(a=>a.id===f.value))==null?void 0:r.component)||Q}),R=()=>{h.push(l.value)},ee=()=>{window.open("https://cal.com/jobportal/support","_blank")},X=()=>{h.push("/profile")},ae=()=>{h.push("/applications/my")};return(r,a)=>F(b).user?(i(),c("section",Ue,[e("header",Xe,[e("div",Oe,[e("p",Ge,"Hola, "+t(z.value),1),e("h1",null,t(x.value),1),e("p",null,t(T.value),1),e("div",Ke,[_(N,{size:"sm",onClick:R},{default:p(()=>[y(t(s.value),1)]),_:1}),e("button",{class:"link-button",type:"button",onClick:ee},"Contactar soporte")])]),e("div",Qe,[(i(!0),c(w,null,$(L.value,o=>(i(),c("article",{key:o.label,class:"hero-card fade-up"},[e("p",We,t(o.label),1),e("strong",Ye,t(o.value),1),e("small",null,t(o.meta),1)]))),128))])]),m.value!=="employer"?(i(),c("section",Ze,[(i(!0),c(w,null,$(k.value,o=>(i(),c("article",{key:o.label,class:"stat-card"},[e("p",ea,t(o.label),1),e("strong",aa,t(o.value),1),e("small",null,t(o.meta),1)]))),128))])):B("",!0),e("section",ta,[(i(!0),c(w,null,$(d.value,o=>(i(),c("article",{key:o.title,class:"insight-card",style:K({"--accent":o.accent})},[e("div",null,[e("p",sa,t(o.badge),1),e("h3",null,t(o.title),1),e("p",null,t(o.copy),1)]),e("button",{class:"pill-link",type:"button",onClick:S=>F(h).push(o.cta.to)},t(o.cta.label),9,oa)],4))),128))]),e("section",la,[e("div",null,[a[1]||(a[1]=e("p",{class:"eyebrow"},"Tu perfil",-1)),e("h3",null,t(V.value),1),e("p",null,t(A.value),1)]),e("div",na,[e("div",null,[e("strong",null,t(P.value.name),1),e("p",null,t(P.value.email),1),e("span",ra,t(P.value.roleLabel),1)]),e("div",ia,[_(F(j),{class:"pill-link",to:"/profile"},{default:p(()=>[...a[2]||(a[2]=[y("Ver perfil completo",-1)])]),_:1}),_(N,{variant:"ghost",size:"sm",onClick:X},{default:p(()=>[...a[3]||(a[3]=[y("Editar perfil",-1)])]),_:1})])])]),m.value!=="employer"?(i(),c("section",ca,[e("article",ua,[e("div",null,[a[4]||(a[4]=e("p",{class:"eyebrow"},"Editar perfil",-1)),e("h3",null,"Tu perfil está al "+t(n.value)+"%",1),a[5]||(a[5]=e("p",null,"Completa bio, CV y skills para destacar en los próximos filtros.",-1))]),e("div",da,[e("div",{class:"widget-card__progress-bar",style:K({"--progress":n.value+"%"})},null,4),e("small",null,t(n.value)+"% completo",1)]),_(N,{variant:"ghost",size:"sm",onClick:X},{default:p(()=>[...a[6]||(a[6]=[y("Actualizar ahora",-1)])]),_:1})]),e("article",pa,[e("div",null,[a[7]||(a[7]=e("p",{class:"eyebrow"},"Ver mis aplicaciones",-1)),e("h3",null,t(u.value.headline),1),e("p",null,t(u.value.copy),1)]),e("dl",ma,[e("div",null,[a[8]||(a[8]=e("dt",null,"Enviadas",-1)),e("dd",null,t(u.value.sent),1)]),e("div",null,[a[9]||(a[9]=e("dt",null,"Aceptadas",-1)),e("dd",null,t(u.value.accepted),1)]),e("div",null,[a[10]||(a[10]=e("dt",null,"En revisión",-1)),e("dd",null,t(u.value.reviewing),1)])]),_(N,{size:"sm",onClick:ae},{default:p(()=>[...a[11]||(a[11]=[y("Abrir panel",-1)])]),_:1})])])):B("",!0),m.value!=="employer"?(i(),c("section",va,[_(we)])):(i(),c("section",ba,[e("div",_a,[(i(),c(w,null,$(C,o=>e("button",{key:o.id,class:oe(["dashboard-tab",{"dashboard-tab--active":o.id===f.value}]),type:"button",role:"tab",onClick:S=>f.value=o.id},t(o.label),11,ya)),64))]),(i(),G(se(M.value),{key:f.value}))]))])):(i(),G(I,{key:1,class:"dashboard-view__empty"},{title:p(()=>[...a[12]||(a[12]=[y("Sin sesión activa",-1)])]),default:p(()=>[a[14]||(a[14]=e("p",null,"Vuelve a iniciar sesión para acceder a tu panel personalizado.",-1)),_(N,{size:"sm",onClick:a[0]||(a[0]=o=>F(h).push("/login"))},{default:p(()=>[...a[13]||(a[13]=[y("Ir a iniciar sesión",-1)])]),_:1})]),_:1}))}},za=q(fa,[["__scopeId","data-v-5f9bf923"]]);export{za as default};
