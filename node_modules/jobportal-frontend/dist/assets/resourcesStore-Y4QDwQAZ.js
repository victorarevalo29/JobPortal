import{D as o,z as l}from"./index-Cw7ty9o7.js";const c=t=>{if(!t)return 1/0;const e=new Date(t);if(Number.isNaN(e.getTime()))return 1/0;const n=Date.now()-e.getTime();return Math.floor(n/(1e3*60*60*24))},d=t=>{const e=t?new Date(t):new Date;return Number.isNaN(e.getTime())?"Reciente":new Intl.DateTimeFormat("es-MX",{day:"numeric",month:"short"}).format(e)},u=(t="")=>{const e=t.trim().split(/\s+/).length;return`${Math.max(5,Math.round(e/180))} min`},m=(t="",e="")=>{const n=`${t} ${e}`.toLowerCase();return n.includes("taller")||n.includes("workshop")?"Taller":n.includes("playbook")||n.includes("kit")?"Playbook":n.includes("plantilla")||n.includes("canvas")?"Plantilla":"Artículo"},f=t=>{var n,i,a,s;const e=new Set;return t.category&&e.add(t.category),(s=(a=(i=(n=t.title)==null?void 0:n.split(/\s+/))==null?void 0:i.filter(r=>r.length>3))==null?void 0:a.slice(0,2))==null||s.forEach(r=>e.add(r.replace(/[^\wáéíóúñ]+/gi,""))),Array.from(e)},h=t=>{var a;const e=((a=t.content)==null?void 0:a.trim())||"",n=e.length>200?`${e.slice(0,200)}…`:e,i=c(t.publishedAt||t.createdAt)<=21?["Nuevo"]:[];return{id:t._id,title:t.title,category:t.category,format:m(t.category,t.title),description:n,date:d(t.publishedAt||t.createdAt),duration:u(t.content),author:t.author||"Equipo JobPortal",tags:f(t),status:i,raw:t}},p=o("resources",{state:()=>({resources:[],loading:!1,error:""}),actions:{async fetchResources(t={}){this.loading=!0,this.error="";try{const e=await l("/resources",{params:t});this.resources=Array.isArray(e)?e.map(h):[]}catch(e){this.error=e.message,this.resources=[]}finally{this.loading=!1}}}});export{p as u};
