import{_ as B,r as U,p as w,i as x,c as y,a as t,b as o,w as i,B as f,o as p,e as u,F as J,d as j,l as g,t as d,f as D,g as M,v as E,j as S,k as h}from"./index-BsLnnuA8.js";import{B as v}from"./BaseCard-BhYAbX2i.js";import{B as r}from"./BaseInput-DXqoVjhU.js";import{u as N}from"./jobsStore-C7FdPDiM.js";const P={class:"manage-jobs"},q={class:"manage-jobs__header"},F={class:"manage-jobs__layout"},O={class:"manage-jobs__table"},R={class:"panel-table"},$={class:"actions"},z=["onClick"],T=["onClick"],A={class:"manage-jobs__form"},G={class:"field"},H={class:"field"},I={class:"field"},L={class:"field"},K={class:"field"},Q={class:"field"},W={class:"field"},X={class:"job-form__actions"},Y={__name:"ManageJobs",setup(Z){const n=N(),b=()=>({id:null,title:"",company:"",location:"",category:"",modality:"",salary:"",description:""}),l=U(b()),m=w(()=>!!l.id),V=s=>{Object.assign(l,b(),s)},c=()=>{Object.assign(l,b())},_=async()=>{if(!l.title.trim())return;const s={title:l.title,company:l.company,location:l.location,category:l.category,modality:l.modality,salary:l.salary,description:l.description};m.value?await n.updateJob(l.id,s):await n.createJob(s),c()},k=async s=>{await n.deleteJob(s),l.id===s&&c()};return x(async()=>{n.jobs.length||await n.fetchJobs()}),(s,e)=>(p(),y("section",P,[t("header",q,[e[8]||(e[8]=t("div",null,[t("p",{class:"section-kicker"},"Vacantes"),t("h1",null,"Publica o edita tus posiciones abiertas."),t("p",null,"Cuenta historias atractivas sobre tu equipo, define expectativas y sincroniza estatus en segundos.")],-1)),o(f,{variant:"ghost",size:"sm",onClick:c},{default:i(()=>[...e[7]||(e[7]=[u("Reiniciar formulario",-1)])]),_:1})]),t("div",F,[t("section",O,[o(v,null,{title:i(()=>[...e[9]||(e[9]=[u("Vacantes activas",-1)])]),default:i(()=>[t("table",R,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"Título"),t("th",null,"Área"),t("th",null,"Modalidad"),t("th",null,"Ubicación"),t("th")])],-1)),t("tbody",null,[(p(!0),y(J,null,j(g(n).jobs,a=>(p(),y("tr",{key:a.id},[t("td",null,[t("strong",null,d(a.title),1),t("p",null,d(a.company),1)]),t("td",null,d(a.category),1),t("td",null,d(a.modality),1),t("td",null,d(a.location),1),t("td",$,[t("button",{class:"table-link",onClick:C=>V(a)},"Editar",8,z),t("button",{class:"table-link danger",onClick:C=>k(a.id)},"Eliminar",8,T)])]))),128))])])]),_:1})]),t("section",A,[o(v,null,{title:i(()=>[u(d(m.value?"Actualizar vacante":"Nueva vacante"),1)]),default:i(()=>[t("form",{class:"job-form",onSubmit:D(_,["prevent"])},[t("div",G,[e[11]||(e[11]=t("span",null,"Puesto",-1)),o(r,{modelValue:l.title,"onUpdate:modelValue":e[0]||(e[0]=a=>l.title=a),placeholder:"Ej. Product Designer",required:""},null,8,["modelValue"])]),t("div",H,[e[12]||(e[12]=t("span",null,"Compañía",-1)),o(r,{modelValue:l.company,"onUpdate:modelValue":e[1]||(e[1]=a=>l.company=a),placeholder:"Ej. Orbital",required:""},null,8,["modelValue"])]),t("div",I,[e[13]||(e[13]=t("span",null,"Ubicación",-1)),o(r,{modelValue:l.location,"onUpdate:modelValue":e[2]||(e[2]=a=>l.location=a),placeholder:"Remoto / Ciudad",required:""},null,8,["modelValue"])]),t("div",L,[e[14]||(e[14]=t("span",null,"Categoría",-1)),o(r,{modelValue:l.category,"onUpdate:modelValue":e[3]||(e[3]=a=>l.category=a),placeholder:"Design, Product, Data"},null,8,["modelValue"])]),t("div",K,[e[15]||(e[15]=t("span",null,"Modalidad",-1)),o(r,{modelValue:l.modality,"onUpdate:modelValue":e[4]||(e[4]=a=>l.modality=a),placeholder:"Híbrido, Remoto, On-site"},null,8,["modelValue"])]),t("div",Q,[e[16]||(e[16]=t("span",null,"Rango salarial",-1)),o(r,{modelValue:l.salary,"onUpdate:modelValue":e[5]||(e[5]=a=>l.salary=a),placeholder:"$35k - $42k USD"},null,8,["modelValue"])]),t("div",W,[e[17]||(e[17]=t("span",null,"Descripción corta",-1)),M(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=a=>l.description=a),rows:"4",placeholder:"Comparte contexto sobre el reto"},null,512),[[E,l.description]])]),t("div",X,[o(f,{type:"submit","is-loading":g(n).saving},{default:i(()=>[u(d(m.value?"Guardar cambios":"Publicar vacante"),1)]),_:1},8,["is-loading"]),m.value?(p(),S(f,{key:0,variant:"ghost",type:"button",onClick:c},{default:i(()=>[...e[18]||(e[18]=[u("Cancelar",-1)])]),_:1})):h("",!0)])],32)]),_:1})])])]))}},ot=B(Y,[["__scopeId","data-v-ce0ed503"]]);export{ot as default};
