import{_ as E,s as R,c as v,x as I,o as G,a as r,b as e,F as u,e as c,d as y,w as m,B as g,t,l as p,f as x,m as C,n as w,g as o,h as k}from"./index-Cw7ty9o7.js";import{B as H}from"./BaseInput-DF9V6cTV.js";import{B as z}from"./BaseCard-B_bAREMe.js";import{u as J}from"./resourcesStore-Y4QDwQAZ.js";const Q={class:"resources"},U={class:"resources__hero"},W={class:"hero__content"},X={class:"hero__badges"},j={class:"hero__actions"},K={class:"hero__board"},O={class:"resources__filters"},Y={class:"filters__groups"},Z={class:"filters__chips"},ee=["onClick"],se={class:"filters__chips filters__chips--ghost"},le=["onClick"],te={class:"filters__meta"},oe={class:"resources__layout"},re={key:0,class:"resource-spotlight"},ae={class:"spotlight__meta"},ne={class:"spotlight__format"},ie={class:"spotlight__tags"},ue={class:"spotlight__footer"},ce={key:1,class:"resource-spotlight resource-spotlight--skeleton"},de={key:3,class:"resource-grid"},pe={class:"resource-card__labels"},_e={class:"resource-card__format"},ve={key:0,class:"resource-card__status"},me={class:"resource-card__tags"},ke={class:"resource-card__meta"},fe={class:"resource-card__footer"},ye={key:0,class:"resource-grid__empty"},ge={class:"resources__collections"},he={key:1,class:"collection-card"},be={class:"collection-card__header"},Ce={class:"section-kicker"},Re={key:0,class:"collection-card__grid"},we={key:1,class:"collection-card__empty"},Be={__name:"ResourcesView",setup(Ne){const n=J(),B=["Todos","Nuevo"],L=["Playbooks accionables","Feedback curado","Ready to ship"],P={Playbook:{kicker:"Guías accionables",title:"Playbooks & frameworks",description:"Secuencias paso a paso para documentar decisiones y alinear squads."},Taller:{kicker:"Workshops guiados",title:"Talleres & labs",description:"Sesiones listas para facilitar con agenda, prompts y entregables."},Artículo:{kicker:"Lecturas rápidas",title:"Artículos & briefs",description:"Capsulas para revisar en menos de 10 minutos y compartir insights."},Plantilla:{kicker:"Formatos reutilizables",title:"Plantillas listas para iterar",description:"Documentos editables para aplicar con tu cohorte."}},S=a=>({kicker:"Colección curada",title:a,description:"Recursos seleccionados de la biblioteca JobPortal."}),h=R(""),f=R("Todos"),b=R(B[0]),N=v(()=>["Todos",...Array.from(new Set(n.resources.map(s=>s.category)))]);I(N,a=>{a.includes(f.value)||(f.value="Todos")});const _=v(()=>{let a=n.resources;if(f.value!=="Todos"&&(a=a.filter(s=>s.category===f.value)),b.value!=="Todos"&&(a=a.filter(s=>{var l;return(l=s.status)==null?void 0:l.includes(b.value)})),h.value.trim()){const s=h.value.toLowerCase();a=a.filter(l=>l.title.toLowerCase().includes(s)||l.description.toLowerCase().includes(s)||l.tags.some(i=>i.toLowerCase().includes(s)))}return a}),d=v(()=>_.value.length?_.value.find(a=>{var s;return(s=a.status)==null?void 0:s.includes("Nuevo")})||_.value[0]:null),T=v(()=>d.value?_.value.filter(a=>a.id!==d.value.id):_.value),A=v(()=>Array.from(new Set(_.value.map(s=>s.format))).map(s=>({format:s,detail:P[s]||S(s),items:_.value.filter(l=>l.format===s)}))),D=v(()=>_.value.length),F=a=>new Intl.NumberFormat("es-MX",{maximumFractionDigits:0}).format(a||0),$=v(()=>n.resources.filter(a=>a.status.includes("Nuevo"))),M=v(()=>{if(!n.resources.length)return"–";const a=n.resources.reduce((s,l)=>{const i=parseInt(l.duration,10);return s+(Number.isFinite(i)?i:10)},0);return`${Math.max(1,Math.round(a/n.resources.length))} min`}),q=v(()=>[{label:"Recursos publicados",value:F(n.resources.length),description:"Listos para cohorts"},{label:"Actualizados este mes",value:F($.value.length),description:"Entradas recientes"},{label:"Lectura estimada",value:M.value,description:"Tiempo promedio"}]);return G(()=>{n.fetchResources()}),(a,s)=>(o(),r("section",Q,[e("header",U,[e("div",W,[s[4]||(s[4]=e("p",{class:"section-kicker"},"Librería viva",-1)),s[5]||(s[5]=e("h2",null,"Recursos curados para diseñar tu roadmap profesional con intención.",-1)),s[6]||(s[6]=e("p",null," Playbooks, talleres y plantillas auditadas cada semana por mentores operando en squads reales. Todo listo para compartir con tu cohorte en cuestión de minutos. ",-1)),e("div",X,[(o(),r(u,null,c(L,l=>e("span",{key:l},t(l),1)),64))]),e("div",j,[y(g,null,{default:m(()=>[...s[2]||(s[2]=[k("Explorar colecciones",-1)])]),_:1}),s[3]||(s[3]=e("button",{class:"hero__link",type:"button"},"Ver calendario de drops",-1))])]),e("div",K,[(o(!0),r(u,null,c(q.value,l=>(o(),r("article",{key:l.label,class:"board-card"},[e("p",null,t(l.label),1),e("strong",null,t(l.value),1),e("small",null,t(l.description),1)]))),128))])]),e("section",O,[y(H,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=l=>h.value=l),placeholder:"Buscar playbooks, talleres o plantillas"},null,8,["modelValue"]),e("div",Y,[e("div",Z,[(o(!0),r(u,null,c(N.value,l=>(o(),r("button",{key:l,type:"button",class:w(["filter-chip",{"is-active":l===f.value}]),onClick:i=>f.value=l},t(l),11,ee))),128))]),e("div",se,[(o(),r(u,null,c(B,l=>e("button",{key:l,type:"button",class:w(["filter-pill",{"is-active":l===b.value}]),onClick:i=>b.value=l},t(l),11,le)),64))])]),e("div",te,[e("span",null,t(p(n).loading?"Cargando recursos…":`${D.value} recursos listos`),1),e("p",null,t(p(n).error||"Actualizados cada lunes con feedback real."),1)])]),e("section",oe,[d.value?(o(),r("article",re,[e("header",null,[e("div",ae,[e("span",ne,t(d.value.format),1),(o(!0),r(u,null,c(d.value.status,l=>(o(),r("span",{key:l,class:"spotlight__status"},t(l),1))),128))]),e("span",null,t(d.value.date),1)]),e("h3",null,t(d.value.title),1),e("p",null,t(d.value.description),1),e("ul",ie,[(o(!0),r(u,null,c(d.value.tags,l=>(o(),r("li",{key:l},t(l),1))),128))]),e("div",ue,[e("div",null,[s[7]||(s[7]=e("small",null,"Autor",-1)),e("p",null,t(d.value.author),1)]),e("div",null,[s[8]||(s[8]=e("small",null,"Duración",-1)),e("p",null,t(d.value.duration),1)]),y(g,{size:"sm"},{default:m(()=>[...s[9]||(s[9]=[k("Abrir spotlight",-1)])]),_:1})])])):p(n).loading?(o(),r("article",ce,[...s[10]||(s[10]=[e("div",{class:"skeleton-line"},null,-1),e("div",{class:"skeleton-line"},null,-1),e("div",{class:"skeleton-line"},null,-1)])])):p(n).error?(o(),x(z,{key:2,class:"resource-spotlight"},{title:m(()=>[...s[11]||(s[11]=[k("No pudimos cargar la librería",-1)])]),default:m(()=>[e("p",null,t(p(n).error),1)]),_:1})):C("",!0),p(n).loading?(o(),r("div",de,[(o(),r(u,null,c(6,l=>e("article",{key:l,class:"resource-card resource-card--skeleton"},[...s[12]||(s[12]=[e("div",{class:"skeleton-line"},null,-1),e("div",{class:"skeleton-line"},null,-1),e("div",{class:"skeleton-line"},null,-1)])])),64))])):(o(),r("div",{key:4,class:w(["resource-grid",{"resource-grid--empty":!T.value.length}])},[(o(!0),r(u,null,c(T.value,l=>{var i;return o(),r("article",{key:l.id,class:"resource-card"},[e("div",pe,[e("span",_e,t(l.format),1),(i=l.status)!=null&&i.length?(o(),r("span",ve,t(l.status[0]),1)):C("",!0)]),e("h4",null,t(l.title),1),e("p",null,t(l.description),1),e("ul",me,[(o(!0),r(u,null,c(l.tags,V=>(o(),r("li",{key:V},t(V),1))),128))]),e("div",ke,[e("div",null,[s[13]||(s[13]=e("small",null,"Categoría",-1)),e("p",null,t(l.category),1)]),e("div",null,[s[14]||(s[14]=e("small",null,"Duración",-1)),e("p",null,t(l.duration),1)]),e("div",null,[s[15]||(s[15]=e("small",null,"Actualización",-1)),e("p",null,t(l.date),1)])]),e("div",fe,[e("span",null,"Por "+t(l.author),1),y(g,{variant:"secondary",size:"sm"},{default:m(()=>[...s[16]||(s[16]=[k("Abrir recurso",-1)])]),_:1})])])}),128)),_.value.length?C("",!0):(o(),r("p",ye,"No hay resultados para este filtro todavía."))],2))]),e("section",ge,[p(n).loading?(o(),r(u,{key:0},c(2,l=>e("article",{key:`collection-${l}`,class:"collection-card collection-card--skeleton"},[...s[17]||(s[17]=[e("div",{class:"skeleton-line"},null,-1),e("div",{class:"skeleton-line"},null,-1),e("div",{class:"skeleton-line"},null,-1)])])),64)):!A.value.length&&!p(n).error?(o(),r("article",he,[...s[18]||(s[18]=[e("p",{class:"section-kicker"},"Colecciones en camino",-1),e("h3",null,"Necesitamos más recursos",-1),e("p",null,"Añade nuevos recursos para desbloquear colecciones curadas.",-1)])])):(o(!0),r(u,{key:2},c(A.value,l=>(o(),r("article",{key:l.format,class:"collection-card"},[e("div",be,[e("div",null,[e("p",Ce,t(l.detail.kicker),1),e("h3",null,t(l.detail.title),1),e("p",null,t(l.detail.description),1)]),y(g,{variant:"ghost",size:"sm"},{default:m(()=>[...s[19]||(s[19]=[k("Ver colección",-1)])]),_:1})]),l.items.length?(o(),r("div",Re,[(o(!0),r(u,null,c(l.items,i=>(o(),r("article",{key:i.id,class:"collection-card__item"},[e("header",null,[e("span",null,t(i.duration),1),e("span",null,t(i.date),1)]),e("h4",null,t(i.title),1),e("p",null,t(i.description),1),e("footer",null,[e("span",null,"Por "+t(i.author),1),s[20]||(s[20]=e("button",{type:"button"},"Guardar",-1))])]))),128))])):(o(),r("p",we,"Sin recursos para esta categoría."))]))),128)),p(n).error?(o(),x(z,{key:3,class:"collection-card__error"},{title:m(()=>[...s[21]||(s[21]=[k("Error al cargar colecciones",-1)])]),default:m(()=>[e("p",null,t(p(n).error),1),y(g,{size:"sm",variant:"ghost",onClick:s[1]||(s[1]=l=>p(n).fetchResources())},{default:m(()=>[...s[22]||(s[22]=[k("Reintentar",-1)])]),_:1})]),_:1})):C("",!0)])]))}},xe=E(Be,[["__scopeId","data-v-73900bb7"]]);export{xe as default};
