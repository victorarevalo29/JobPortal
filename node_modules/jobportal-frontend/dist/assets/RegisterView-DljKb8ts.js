import{_ as C,p as w,r as U,s as B,c as x,a as i,b as o,d as t,w as d,u as k,g as m,i as N,m as y,j as b,k as E,E as S,v as j,t as I,B as M,l as R,h as f}from"./index-Cw7ty9o7.js";import{B as T}from"./BaseCard-B_bAREMe.js";import{B as n}from"./BaseInput-DF9V6cTV.js";const z={class:"auth auth--register"},D={class:"auth__surface"},L={class:"auth__select"},P={key:0,class:"auth__company"},q={class:"auth__company-grid"},A={class:"auth__textarea"},O={key:0,class:"auth__error"},F={__name:"RegisterView",setup(J,{expose:v}){const p=w(),c=k(),a=U({name:"",email:"",password:"",role:"user",company:{name:"",industry:"",location:"",description:"",logoUrl:""}}),r=B(""),u=x(()=>a.role==="employer"),V=()=>{const s={name:a.company.name.trim(),industry:a.company.industry.trim(),location:a.company.location.trim(),description:a.company.description.trim(),logoUrl:a.company.logoUrl.trim()};return Object.fromEntries(Object.entries(s).filter(([,e])=>!!e))},_=()=>!a.name||!a.email||!a.password?(r.value="Completa los campos obligatorios",!1):u.value&&!a.company.name.trim()?(r.value="Comparte el nombre de tu empresa",!1):(r.value="",!0),g=async()=>{if(_())try{const s={name:a.name.trim(),email:a.email.trim(),password:a.password,role:a.role};u.value&&(s.company=V()),await p.register(s),c.push("/dashboard")}catch(s){r.value=s.message||"No pudimos crear tu cuenta"}},h=()=>{c.push("/login")};return v({isEmployer:u}),(s,e)=>(m(),i("section",z,[o("div",D,[e[16]||(e[16]=o("div",{class:"auth__side"},[o("span",{class:"auth__pill"},"Comunidad"),o("h2",null,"Construye tu espacio de talento con datos reales."),o("ul",null,[o("li",null,"Analiza vacantes y postulaciones en tiempo real."),o("li",null,"Comparte recursos y foros curados para tu cohorte."),o("li",null,"Escala tu marca empleadora con perfiles auténticos.")])],-1)),t(T,{class:"auth__card"},{default:d(()=>[e[15]||(e[15]=o("div",{class:"auth__header"},[o("p",{class:"auth__eyebrow"},"Comencemos"),o("h1",null,"Crea tu cuenta JobPortal"),o("p",{class:"auth__hint"},"Elige si quieres explorar oportunidades o publicar vacantes.")],-1)),o("form",{class:"auth__form",onSubmit:N(g,["prevent"])},[t(n,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.name=l),label:"Nombre completo",placeholder:"Tu nombre"},null,8,["modelValue"]),t(n,{modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=l=>a.email=l),type:"email",label:"Correo",placeholder:"tusitio@uni.edu"},null,8,["modelValue"]),t(n,{modelValue:a.password,"onUpdate:modelValue":e[2]||(e[2]=l=>a.password=l),type:"password",label:"Contraseña",placeholder:"••••••••"},null,8,["modelValue"]),o("label",L,[e[10]||(e[10]=o("span",null,"Rol",-1)),b(o("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>a.role=l)},[...e[9]||(e[9]=[o("option",{value:"user"},"Busco oportunidades",-1),o("option",{value:"employer"},"Soy employer",-1)])],512),[[E,a.role]])]),t(S,{name:"fade"},{default:d(()=>[u.value?(m(),i("div",P,[e[12]||(e[12]=o("div",{class:"auth__company-header"},[o("div",null,[o("p",null,"Completa cómo se presenta tu organización."),o("h3",null,"Información de la empresa")]),o("span",{class:"auth__company-pill"},"Visible en vacantes")],-1)),o("div",q,[t(n,{modelValue:a.company.name,"onUpdate:modelValue":e[4]||(e[4]=l=>a.company.name=l),label:"Nombre",placeholder:"Ej. Nebula Kitchen"},null,8,["modelValue"]),t(n,{modelValue:a.company.industry,"onUpdate:modelValue":e[5]||(e[5]=l=>a.company.industry=l),label:"Industria",placeholder:"Foodtech"},null,8,["modelValue"]),t(n,{modelValue:a.company.location,"onUpdate:modelValue":e[6]||(e[6]=l=>a.company.location=l),label:"Ubicación",placeholder:"Ciudad, País"},null,8,["modelValue"]),t(n,{modelValue:a.company.logoUrl,"onUpdate:modelValue":e[7]||(e[7]=l=>a.company.logoUrl=l),label:"Logo (URL)",placeholder:"https://uploads.jobportal.dev/logo.png"},null,8,["modelValue"])]),o("label",A,[e[11]||(e[11]=o("span",null,"Descripción corta",-1)),b(o("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>a.company.description=l),rows:"3",maxlength:"1500",placeholder:"Misión, rituales o stack que hacen única a tu empresa"},null,512),[[j,a.company.description]])])])):y("",!0)]),_:1}),r.value?(m(),i("p",O,I(r.value),1)):y("",!0),t(M,{type:"submit",size:"lg","is-loading":R(p).loading},{default:d(()=>[...e[13]||(e[13]=[f("Crear cuenta",-1)])]),_:1},8,["is-loading"])],32),o("p",{class:"auth__alt"},[e[14]||(e[14]=f(" ¿Ya tienes cuenta? ",-1)),o("button",{type:"button",class:"auth__link",onClick:h},"Inicia sesión")])]),_:1})])]))}},H=C(F,[["__scopeId","data-v-fd2171d6"]]);export{H as default};
